# 基础

数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。

所谓的关系型数据库，是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。

## 1.1 安装

[官网下载地址](http://www.mysql.com/downloads)

这里介绍几种其他安装方式

### 1.1.1 HomeBrew安装

    brew install mysql 

**验证安装**

    mysqladmin --version

linux上该命令将输出以下结果：

    mysqladmin  Ver 8.23 Distrib 5.0.9-0, for redhat-linux-gnu on i386

如果以上命令执行后未输入任何信息，说明你的MySQL未安装成功。

**启动**

- `sudo brew service start mysql` ：后台启动
- `sudo mysql.server start`：前台启动mysql(关闭控制台，服务停止)

**设置密码**

- `sudo mysql_secure_installation` ：设置密码

**连接**

    mysql -u root -p {pwd}

> 测试发现，brew安装很慢

### 1.1.2 docker安装

先运行容器

    docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:latest

查看容器运行

```bash
docker container ls
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                 NAMES
de58c162887b        mysql:latest          "docker-entrypoint..."   12 minutes ago      Up 12 minutes       3306/tcp, 33060/tcp   some-mysql
```

进入容器，操作数据库

```bash
docker exec -it some-mysql bash
mysql -u root -p
```

some-mysql 是容器名称

> 测试发现，很好用

## 1.2 管理

数据库默认有四张表

```bash
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.17 sec)
```

- **information_schema**：提供了访问数据库元数据的方式，它保存着关于MySQL服务器所维护的所有其他数据库的信息
- **mysql**：Mysql的核心数据库，类似于sql server中的master表，主要负责存储数据库的用户、权限设置、关键字等mysql自己需要使用的控制和管理信息。(常用的，在mysql.user表中修改root用户的密码)
- **performance_schema**：主要用于收集数据库服务器性能参数。并且库里表的存储引擎均为PERFORMANCE_SCHEMA，而用户是不能创建存储引擎为PERFORMANCE_SCHEMA的表
- **sys**：Sys库所有的数据源来自performance_schema。目标是把performance_schema的把复杂度降低，让DBA能更好的阅读这个库里的内容。让DBA更快的了解DB的运行情况。 

## 1.2.1 用户设置

**添加新的用户**

允许本地IP访问localhost的Mysql数据库

```bash
mysql> create user 'editest'@'localhost' identified by 'editest123456';
Query OK, 0 rows affected (0.06 sec)
```

允许外网IP访问数据库editest，本命令包含上面的命令，是所有的IP都可以访问该数据库

```bash
mysql> create user 'editest'@'%' identified by 'editest123456';
Query OK, 0 rows affected (0.00 sec)
```



